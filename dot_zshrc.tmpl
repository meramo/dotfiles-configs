# Enable Powerlevel10k instant prompt (must stay at top)
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# --- Preserved from original .zshrc ---
export PATH="$HOME/.local/bin:$PATH"

# Path to Oh My Zsh installation
export ZSH="$HOME/.oh-my-zsh"

# Theme
ZSH_THEME="powerlevel10k/powerlevel10k"

# Plugins
plugins=(git zsh-autosuggestions zsh-syntax-highlighting)

source $ZSH/oh-my-zsh.sh

# --- History Configuration ---
HISTSIZE=50000
SAVEHIST=50000
setopt SHARE_HISTORY          # Share history across all sessions
setopt HIST_IGNORE_ALL_DUPS   # Remove older duplicate entries
setopt HIST_REDUCE_BLANKS     # Remove unnecessary blanks
setopt HIST_VERIFY            # Show command before executing from history
setopt INC_APPEND_HISTORY     # Write to history immediately, not on exit

# --- Aliases ---
# Navigation
alias ll="ls -lAFh"
alias la="ls -A"
alias ..="cd .."
alias ...="cd ../.."

# Git shortcuts (supplements oh-my-zsh git plugin)
alias gs="git status"
alias gp="git push"
alias gc="git commit"
alias gd="git diff"
alias gl="git log --oneline --graph --decorate -20"

# Convenience
alias reload="source ~/.zshrc"
alias zshconfig="code ~/.zshrc"

# --- Powerlevel10k config ---
# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
